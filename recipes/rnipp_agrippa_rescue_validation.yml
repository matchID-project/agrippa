recipes:  
  rnipp_agrippa_rescue_validation:
  # this recipe helps to recover validated data
  # from a previous index - may be usefull if you
  # change your prep/scoring pipeling
    input: 
      dataset: rnipp_agrippa_v0
      select:
        query:
          constant_score: 
            filter:
              exists:
                field:
                  validation_decision
    output: 
      dataset: rnipp_agrippa
      append: True
    steps:
      - keep:
          select: validation.*|.*matchid_id
       #   where: validation_decision
      - join: 
          type: elasticsearch
          dataset: rnipp_agrippa
          prefix: ''
          query:
            size: 1
            query:
              bool:
                must:
                  - term:
                      matchid_id: matchid_id
                  - term:
                      hit_matchid_id: hit_matchid_id
   

